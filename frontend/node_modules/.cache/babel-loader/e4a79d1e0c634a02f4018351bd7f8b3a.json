{"ast":null,"code":"var _jsxFileName = \"/Users/lisapousetteblome/Desktop/technigo-final-project/frontend/src/components/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch, batch } from \"react-redux\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { API_URL } from \"../utils/constants\";\nimport member from \"../reducers/member\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const accessToken = useSelector(store => store.member.accessToken);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (accessToken) {\n      navigate(\"/game\");\n    }\n  }, [accessToken, navigate]);\n\n  const onFormSubmit = e => {\n    e.preventDefault();\n    const options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    };\n    fetch(API_URL(\"login\"), options).then(res => res.json()).then(data => {\n      if (data.success) {\n        batch(() => {\n          dispatch(member.actions.setUserId(data.response.userId));\n          dispatch(member.actions.setUsername(data.response.username));\n          dispatch(member.actions.setAccessToken(data.response.accessToken));\n          dispatch(member.actions.setError(null));\n        });\n      } else {\n        batch(() => {\n          dispatch(member.actions.setUserId(null));\n          dispatch(member.actions.setUsername(null));\n          dispatch(member.actions.setAccessToken(null));\n          dispatch(member.actions.setError(data.response));\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Hello from login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onFormSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"username\",\n        children: \"Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"username\",\n        type: \"text\",\n        value: username,\n        onChange: e => setUsername(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"password\",\n        type: \"password\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: onFormSubmit,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/register\",\n      children: \"Not member yet? register here\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Login, \"0iLS7Xy4JJB2v9Xjpc4edovAGOA=\", false, function () {\n  return [useSelector, useDispatch, useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/lisapousetteblome/Desktop/technigo-final-project/frontend/src/components/Login.js"],"names":["React","useState","useEffect","useSelector","useDispatch","batch","Link","useNavigate","API_URL","member","Login","username","setUsername","password","setPassword","accessToken","store","dispatch","navigate","onFormSubmit","e","preventDefault","options","method","headers","body","JSON","stringify","fetch","then","res","json","data","success","actions","setUserId","response","userId","setAccessToken","setError","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch, batch } from \"react-redux\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { API_URL } from \"../utils/constants\";\nimport member from \"../reducers/member\";\n\nconst Login = () => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const accessToken = useSelector((store) => store.member.accessToken);\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (accessToken) {\n      navigate(\"/game\");\n    }\n  }, [accessToken, navigate]);\n\n  const onFormSubmit = (e) => {\n    e.preventDefault();\n\n    const options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ username, password }),\n    };\n\n    fetch(API_URL(\"login\"), options)\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.success) {\n          batch(() => {\n            dispatch(member.actions.setUserId(data.response.userId));\n            dispatch(member.actions.setUsername(data.response.username));\n            dispatch(member.actions.setAccessToken(data.response.accessToken));\n            dispatch(member.actions.setError(null));\n          });\n        } else {\n          batch(() => {\n            dispatch(member.actions.setUserId(null));\n            dispatch(member.actions.setUsername(null));\n            dispatch(member.actions.setAccessToken(null));\n            dispatch(member.actions.setError(data.response));\n          });\n        }\n      });\n  };\n  return (\n    <>\n      <div>Hello from login</div>\n      <form onSubmit={onFormSubmit}>\n        <label htmlFor=\"username\">Username</label>\n        <input\n          id=\"username\"\n          type=\"text\"\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n        />\n        <label htmlFor=\"password\">Password</label>\n        <input\n          id=\"password\"\n          type=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button type=\"submit\" onClick={onFormSubmit}>\n          Login\n        </button>\n      </form>\n      <Link to=\"/register\">Not member yet? register here</Link>\n    </>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}